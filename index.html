<!DOCTYPE html>
<html>
<!--
  Copyright © Andreas Hölzl
  @author twitter.com/andywoodly
-->
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

    <link rel="stylesheet" href="main.css"/>

    <script type="text/javascript">
    
        function init() {
            var canvas = document.getElementById('canvas');
            canvas.width = document.width;
            canvas.height = document.height;
            var ctx = canvas.getContext('2d');
            var width = canvas.width-10;
            var height = canvas.height-10;
            var centerX = width/2;
            var centerY = height/2;
            var prevX = -1;
            var prevY = -1;

            var dragok = false;
            
            function clear() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            function myMove(e) {
                if (dragok) {
                    var x = e.pageX;
                    var y = e.pageY;
                    centerX += x - prevX;
                    centerY += y - prevY;
                    clear();
                    draw(ctx, centerX, centerY, 3, 3000);
                    prevY = y;
                    prevX = x;
                }
            }
            
            function myDown(e) {
                prevX = e.pageX;
                prevY = e.pageY;
                dragok = true;
                canvas.onmousemove = myMove;
            }
            
            function myUp() {
                console.log("up");
                dragok = false;
                canvas.onmousemove = null;
            }
            
            canvas.onmousedown = myDown;
            canvas.onmouseup = myUp;
            
            draw(ctx, centerX, centerY, 3, 3000);
        }
        
        function draw(ctx, cx, cy, sf, N) {
            var x = cx;
            var y = cy;
            var x1;
            var y1;
            var xn;
            for(var i = 0; i < N; i++) {
                xn = sequence(i);
                //console.log(xn);
                var xIn = 2 * Math.PI * xn;
                //console.log(xIn);
                x1 = x + sf * Math.cos(xIn);
                y1 = y + sf * Math.sin(xIn);
                //console.log(x,y,x1,y1);

                ctx.beginPath();
                ctx.moveTo(x,y);
                ctx.lineTo(x1,y1);
                //ctx.closePath();
                ctx.stroke();
                x = x1;
                y = y1;
            }
        }
        
        function sequence(n) {
            //return Math.pow(Math.log(n),4)
            //return Math.pow(n,7)/1050;
            return Math.sin(Math.sqrt(n));
        }
        
    </script>
</head>

<body onload='init()'>

<div id="main">
    <div id="canvas_div">
        <canvas id="canvas"></canvas>
    </div>
</div>

</body>

</html>

